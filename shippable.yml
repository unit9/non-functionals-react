language: python
python:
- 2.7

env:
  global:
    # SERVICE_ACCOUNT_KEY
    - secure: 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
build:
  ci:
    - wget https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-sdk-183.0.0-linux-x86_64.tar.gz -O ~/google-cloud-sdk.tar.gz
    - tar xf ~/google-cloud-sdk.tar.gz -C ~/
    - ~/google-cloud-sdk/bin/gcloud components install app-engine-python app-engine-python-extras
    - echo $SERVICE_ACCOUNT_KEY > /tmp/key.json
    - ~/google-cloud-sdk/bin/gcloud -q auth activate-service-account --key-file /tmp/key.json
    - npm i --silent
    - npm run build:docs

  on_success:
    - ~/google-cloud-sdk/bin/gcloud app deploy app.yaml --project non-functionals-react --version $(echo $BRANCH  | sed -E 's/[_/]+/-/g') --no-promote

branches:
  only:
    - develop
    - master